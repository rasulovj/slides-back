// src/services/aiService.ts
import { GoogleGenAI } from "@google/genai";
const ai = new GoogleGenAI({
    apiKey: "AIzaSyAdgC3meYXkhJoD4CuPwDBD4801lNp38eg",
});
export class AIService {
    async generateSlideContent(topic, language = "en") {
        const prompt = `
Create a professional presentation about "${topic}" in ${language} language.

Generate a presentation with the following structure:
1. Title slide
2. 10-15 content slides with key points
3. Conclusion slide

For each slide provide:
- Slide title
- 3â€“5 bullet points or different sections like quote and more (concise, professional)

Return the response in JSON format only:
{
  "title": "Main presentation title",
  "slides": [
    {
      "title": "Slide title",
      "content": ["Point 1", "Point 2", "Point 3"],
      "type": "title" or "content"
    }
  ]
}`;
        try {
            const response = await ai.models.generateContent({
                model: "gemini-2.0-flash",
                contents: prompt,
            });
            const text = response.text ?? "";
            if (!text)
                throw new Error("No text generated by Gemini");
            // Extract JSON safely
            const jsonMatch = text.match(/\{[\s\S]*\}/);
            if (!jsonMatch)
                throw new Error("Invalid JSON format returned by Gemini");
            return JSON.parse(jsonMatch[0]);
        }
        catch (error) {
            console.error("Gemini generation error:", error);
            throw new Error("Failed to generate presentation content");
        }
    }
}
